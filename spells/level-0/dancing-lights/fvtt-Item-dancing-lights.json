{
  "name": "Dancing Lights",
  "type": "spell",
  "img": "systems/dnd5e/icons/spells/fire-arrows-sky-1.jpg",
  "data": {
    "description": {
      "value": "<p>You create up to four torch-sized lights within range, making them appear as torches, lanterns, or glowing orbs that hover in the air for the duration. You can also combine the four lights into one glowing vaguely humanoid form of Medium size. Whichever form you choose, each light sheds dim light in a 10-foot radius.</p><p>As a bonus action on your turn, you can move the lights up to 60 feet to a new spot within range. A light must be within 20 feet of another light created by this spell, and a light winks out if it exceeds the spell's range.</p>",
      "chat": "",
      "unidentified": ""
    },
    "source": "PHB pg. 230",
    "activation": {
      "type": "action",
      "cost": 1,
      "condition": ""
    },
    "duration": {
      "value": 1,
      "units": "minute"
    },
    "target": {
      "value": null,
      "width": null,
      "units": "",
      "type": "self"
    },
    "range": {
      "value": 120,
      "long": 0,
      "units": "ft"
    },
    "uses": {
      "value": 0,
      "max": "0",
      "per": ""
    },
    "consume": {
      "type": "",
      "target": "",
      "amount": null
    },
    "ability": "",
    "actionType": "util",
    "attackBonus": 0,
    "chatFlavor": "",
    "critical": {
      "threshold": null,
      "damage": ""
    },
    "damage": {
      "parts": [],
      "versatile": "",
      "value": ""
    },
    "formula": "",
    "save": {
      "ability": "",
      "dc": null,
      "scaling": "spell",
      "value": ""
    },
    "level": 0,
    "school": "evo",
    "components": {
      "value": "",
      "vocal": true,
      "somatic": true,
      "material": true,
      "ritual": false,
      "concentration": true
    },
    "materials": {
      "value": "A bit of phosphorus or wychwood, or a glowworm",
      "consumed": false,
      "cost": 0,
      "supply": 0
    },
    "preparation": {
      "mode": "prepared",
      "prepared": false
    },
    "scaling": {
      "mode": "none",
      "formula": ""
    }
  },
  "effects": [
    {
      "_id": "UZCSkPPGJDIX1GCx",
      "changes": [],
      "disabled": false,
      "duration": {
        "startTime": null
      },
      "icon": "systems/dnd5e/icons/spells/fire-arrows-sky-1.jpg",
      "label": "Dancing Lights",
      "origin": "Item.zwK0EYGZTvUmVEt9",
      "transfer": false,
      "flags": {
        "dae": {
          "selfTarget": true,
          "stackable": "none",
          "durationExpression": "",
          "macroRepeat": "none",
          "specialDuration": [],
          "transfer": false
        },
        "core": {
          "statusId": ""
        },
        "dnd5e-helpers": {
          "rest-effect": "Ignore"
        },
        "ActiveAuras": {
          "isAura": false,
          "aura": "None",
          "radius": null,
          "alignment": "",
          "type": "",
          "ignoreSelf": false,
          "height": false,
          "hidden": false,
          "displayTemp": false,
          "hostile": false,
          "onlyOnce": false
        }
      },
      "tint": ""
    }
  ],
  "flags": {
    "core": {
      "sourceId": "Compendium.dnd5e.spells.CAxSzHWizrafT033"
    },
    "scene-packer": {
      "hash": "d6f7426d4c52e52ea7b08ada0a13144e7cef9122",
      "sourceId": "Item.zwK0EYGZTvUmVEt9"
    },
    "rest-recovery": {
      "data": {
        "recovery": {
          "enabled": false
        }
      }
    },
    "midi-qol": {
      "effectActivation": false,
      "onUseMacroName": "[postActiveEffects]ItemMacro"
    },
    "midiProperties": {
      "nodam": false,
      "fulldam": false,
      "halfdam": false,
      "rollOther": false,
      "critOther": false,
      "magicdam": false,
      "magiceffect": false,
      "concentration": false,
      "toggleEffect": false
    },
    "itemacro": {
      "macro": {
        "_id": null,
        "name": "Dancing Lights",
        "type": "script",
        "author": "ckiTPzlaPztdkjV6",
        "img": "icons/svg/dice-target.svg",
        "scope": "global",
        "command": "// dancing lights\n// on use post active effects\n\nconst lastArg = args[args.length - 1];\nconst tokenOrActor = await fromUuid(lastArg.actorUuid);\nconst tactor = tokenOrActor.actor ? tokenOrActor.actor : tokenOrActor;\n\nasync function postWarp(location, spawnedTokenDoc, updates, iteration) {\n    let ef = tactor.effects.find(i => i.data.label === \"Dancing Lights\");\n    let summonUuid = spawnedTokenDoc.uuid;\n    if (ef) {\n        let changes = [\n            {\n                key: \"flags.dae.deleteUuid\",\n                mode: CONST.ACTIVE_EFFECT_MODES.OVERRIDE,\n                value: summonUuid,\n                priority: 20,\n            }\n        ];\n        await ef.update({ changes: changes.concat(ef.data.changes) });\n    };\n};\n\nlet updates = {\n    token: { \"name\": `Dancing Light (${tactor.name})` },\n    actor: { \"name\": `Dancing Light (${tactor.name})` }\n};\nawait warpgate.spawn(\"Dancing Light\", updates, { post: postWarp }, {});\nawait warpgate.spawn(\"Dancing Light\", updates, { post: postWarp }, {});\nawait warpgate.spawn(\"Dancing Light\", updates, { post: postWarp }, {});\nawait warpgate.spawn(\"Dancing Light\", updates, { post: postWarp }, {});",
        "folder": null,
        "sort": 0,
        "permission": {
          "default": 0
        },
        "flags": {}
      }
    },
    "exportSource": {
      "world": "dnd5e",
      "system": "dnd5e",
      "coreVersion": "9.280",
      "systemVersion": "1.6.3"
    }
  }
}