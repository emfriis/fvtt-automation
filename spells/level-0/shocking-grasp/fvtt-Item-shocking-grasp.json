{
  "name": "Shocking Grasp",
  "type": "spell",
  "img": "systems/dnd5e/icons/spells/lightning-blue-1.jpg",
  "data": {
    "description": {
      "value": "<p>Lightning springs from your hand to deliver a shock to a creature you try to touch. Make a melee spell attack against the target. You have advantage on the attack roll if the target is wearing armor made of metal. On a hit, the target takes 1d8 lightning damage, and it can't take reactions until the start of its next turn.</p>\n<p>The spell's damage increases by 1d8 when you reach 5th level (2d8), 11th level (3d8), and 17th level (4d8).</p>",
      "chat": "",
      "unidentified": ""
    },
    "source": "Basic Rules, Player's Handbook pg 275",
    "activation": {
      "type": "action",
      "cost": 1,
      "condition": ""
    },
    "duration": {
      "value": null,
      "units": "inst"
    },
    "target": {
      "value": null,
      "width": null,
      "units": "touch",
      "type": "creature"
    },
    "range": {
      "value": null,
      "long": null,
      "units": "touch"
    },
    "uses": {
      "value": null,
      "max": "",
      "per": ""
    },
    "consume": {
      "type": "",
      "target": "",
      "amount": null
    },
    "ability": "",
    "actionType": "msak",
    "attackBonus": "0",
    "chatFlavor": "",
    "critical": {
      "threshold": null,
      "damage": ""
    },
    "damage": {
      "parts": [
        [
          "1d8[lightning]",
          "lightning"
        ]
      ],
      "versatile": ""
    },
    "formula": "",
    "save": {
      "ability": "",
      "dc": null,
      "scaling": "spell"
    },
    "level": 0,
    "school": "evo",
    "components": {
      "value": "",
      "vocal": true,
      "somatic": true,
      "material": false,
      "ritual": false,
      "concentration": false
    },
    "materials": {
      "value": "",
      "consumed": false,
      "cost": 0,
      "supply": 0
    },
    "preparation": {
      "mode": "prepared",
      "prepared": false
    },
    "scaling": {
      "mode": "cantrip",
      "formula": "1d8"
    },
    "attunement": 0
  },
  "effects": [],
  "flags": {
    "ddbimporter": {
      "id": 138709,
      "definitionId": 2250,
      "entityTypeId": 435869154,
      "dndbeyond": {
        "lookup": "generic",
        "lookupName": "generic",
        "level": null,
        "castAtLevel": null
      },
      "originalName": "Shocking Grasp",
      "sources": [
        {
          "sourceId": 1,
          "pageNumber": null,
          "sourceType": 2
        },
        {
          "sourceId": 2,
          "pageNumber": 275,
          "sourceType": 1
        }
      ],
      "tags": [
        "Damage"
      ],
      "version": "2.9.59",
      "effectsApplied": true
    },
    "betterRolls5e": {
      "quickVersatile": {
        "altValue": true,
        "value": false
      },
      "quickCharges": {
        "value": {
          "use": true,
          "resource": true
        },
        "altValue": {
          "use": true,
          "resource": true
        }
      },
      "quickDamage": {
        "context": {
          "0": ""
        },
        "value": {
          "0": true
        },
        "altValue": {
          "0": true
        }
      },
      "quickOther": {
        "context": "",
        "value": true,
        "altValue": true
      },
      "quickDesc": {
        "value": true,
        "altValue": true
      },
      "quickAttack": {
        "value": true,
        "altValue": true
      },
      "quickProperties": {
        "value": true,
        "altValue": true
      },
      "quickFlavor": {
        "value": true,
        "altValue": true
      }
    },
    "midi-qol": {
      "fumbleThreshold": null,
      "effectActivation": false,
      "onUseMacroName": "[preAttackRoll]ItemMacro,[postActiveEffects]ItemMacro"
    },
    "midiProperties": {
      "nodam": false,
      "fulldam": false,
      "halfdam": false,
      "rollOther": false,
      "critOther": false,
      "magicdam": false,
      "magiceffect": false,
      "concentration": false,
      "toggleEffect": false
    },
    "core": {
      "sourceId": "Compendium.world.ddb-spells.4Uuia8BwwLw3DvLB"
    },
    "rest-recovery": {
      "data": {
        "recovery": {
          "enabled": false
        }
      }
    },
    "itemacro": {
      "macro": {
        "data": {
          "_id": null,
          "name": "Shocking Grasp",
          "type": "script",
          "author": "otqBqyqMuTGDffTr",
          "img": "icons/svg/dice-target.svg",
          "scope": "global",
          "command": "// shocking grasp\n\nconst lastArg = args[args.length - 1];\n\nif (args[0].tag == \"OnUse\") {\n\tif (lastArg.hitTargetUuids.length > 0) {\n\t\tlet targetUuid = lastArg.hitTargetUuids[0];\n\t\tlet targetToken = await fromUuid(targetUuid);\n\t\tlet targetActor = targetToken.actor ?? targetToken._actor;\n\t\tconst hasEffectApplied = await game.dfreds.effectInterface.hasEffectApplied(\"Reaction\", targetUuid );\n\t\tif (!hasEffectApplied) {\n\t\t\tgame.dfreds.effectInterface.addEffect({ effectName: \"Reaction\", uuid: targetActor.uuid });\n\t\t}\n\t}\n}",
          "folder": null,
          "sort": 0,
          "permission": {
            "default": 0
          },
          "flags": {}
        },
        "_id": null,
        "name": "Shocking Grasp",
        "type": "script",
        "author": "ckiTPzlaPztdkjV6",
        "img": "icons/svg/dice-target.svg",
        "scope": "global",
        "command": "// shocking grasp WIP\n\nconst lastArg = args[args.length - 1];\nconst tokenOrActor = await fromUuid(lastArg.actorUuid);\nconst tactor = tokenOrActor.actor ? tokenOrActor.actor : tokenOrActor;\n\nif (args[0].tag === \"OnUse\" && lastArg.macroPass === \"preAttackRoll\") {\n\tif (lastArg.targetUuids.length > 0) {\n\t\tlet targetUuid = lastArg.targetUuids[0];\n\t\tlet tokenOrActorTarget = await fromUuid(targetUuid);\n\t\tlet tactorTarget = tokenOrActorTarget.actor ? tokenOrActorTarget.actor : tokenOrActorTarget;\n\t\tlet isMetal = tactorTarget.items.find(i => i.type == \"equipment\" && i.data.data.equipped && (i.data.data.armor.type == \"heavy\" || i.data.data.armor.type == \"medium\") && !i.data.name.toLowerCase().includes(\"hide\"));\n\t\tif (isMetal) {\n\t\t\tconst effectData = {\n\t\t\t\tchanges: [\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: \"flags.midi-qol.advantage.attack.msak\",\n\t\t\t\t\t\tmode: CONST.ACTIVE_EFFECT_MODES.CUSTOM,\n\t\t\t\t\t\tvalue: 1,\n\t\t\t\t\t\tpriority: 20,\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tdisabled: false,\n\t\t\t\tflags: { dae: { specialDuration: [\"1Attack\"] } },\n\t\t\t\ticon: args[0].item.img,\n\t\t\t\tlabel: `${args[0].item.name} Advantage`,\n\t\t\t};\n\t\t\tawait tactor.createEmbeddedDocuments(\"ActiveEffect\", [effectData]);\n\t\t}\n\t}\n}\n\nif (args[0].tag === \"OnUse\" && lastArg.macroPass === \"postActiveEffects\") {\n\tif (lastArg.hitTargetUuids.length > 0) {\n\t\tlet targetUuid = lastArg.hitTargetUuids[0];\n\t\tlet tokenOrActorTarget = await fromUuid(targetUuid);\n\t\tlet tactorTarget = tokenOrActorTarget.actor ? tokenOrActorTarget.actor : tokenOrActorTarget;\n\t\tconst hasEffectApplied = await game.dfreds.effectInterface.hasEffectApplied(\"Reaction\", targetUuid );\n\t\tif (!hasEffectApplied) {\n\t\t\tgame.dfreds.effectInterface.addEffect({ effectName: \"Reaction\", uuid: tactorTarget.uuid });\n\t\t}\n\t}\n}",
        "folder": null,
        "sort": 0,
        "permission": {
          "default": 0
        },
        "flags": {}
      }
    },
    "scene-packer": {
      "hash": "ebb89aa201774693c2d0b1d98414398e2f93d1ce",
      "sourceId": "Item.1PwSYmw3LwUHHbxj"
    },
    "exportSource": {
      "world": "dnd5e",
      "system": "dnd5e",
      "coreVersion": "9.280",
      "systemVersion": "1.6.3"
    }
  }
}