{
  "name": "Hex Warrior",
  "type": "feat",
  "img": "systems/dnd5e/icons/skills/affliction_18.jpg",
  "data": {
    "description": {
      "value": "<p class=\"Core-Styles_Core-Body\">At 1st level, you acquire the training necessary to effectively arm yourself for battle. You gain proficiency with medium armor, shields, and martial weapons.</p>\n<p class=\"Core-Styles_Core-Body\">The influence of your patron also allows you to mystically channel your will through a particular weapon. Whenever you finish a long rest, you can touch one weapon that you are proficient with and that lacks the two-handed property. When you attack with that weapon, you can use your Charisma modifier, instead of Strength or Dexterity, for the attack and damage rolls. This benefit lasts until you finish a long rest. If you later gain the Pact of the Blade feature, this benefit extends to every pact weapon you conjure with that feature, no matter the weapon’s type.</p>\n\n",
      "chat": "",
      "unidentified": ""
    },
    "source": "",
    "activation": {
      "type": "special",
      "cost": null,
      "condition": ""
    },
    "duration": {
      "value": null,
      "units": ""
    },
    "target": {
      "value": null,
      "width": null,
      "units": "",
      "type": "self"
    },
    "range": {
      "value": null,
      "long": null,
      "units": ""
    },
    "uses": {
      "value": 1,
      "max": "1",
      "per": "lr"
    },
    "consume": {
      "type": "",
      "target": "",
      "amount": null
    },
    "ability": "",
    "actionType": "util",
    "attackBonus": 0,
    "chatFlavor": "",
    "critical": {
      "threshold": null,
      "damage": ""
    },
    "damage": {
      "parts": [],
      "versatile": ""
    },
    "formula": "",
    "save": {
      "ability": "",
      "dc": null,
      "scaling": "spell"
    },
    "requirements": "The Hexblade 1",
    "recharge": {
      "value": null,
      "charged": false
    }
  },
  "effects": [
    {
      "_id": "HRUPreDTnmwrYFIv",
      "changes": [
        {
          "key": "macro.itemMacro",
          "mode": 0,
          "value": "",
          "priority": "20"
        }
      ],
      "disabled": false,
      "duration": {
        "startTime": null
      },
      "icon": "systems/dnd5e/icons/skills/affliction_18.jpg",
      "label": "Hex Warrior",
      "origin": "Item.Y6WGdIjfn3tTJ31W",
      "transfer": false,
      "flags": {
        "dae": {
          "selfTarget": false,
          "stackable": "none",
          "durationExpression": "",
          "macroRepeat": "none",
          "specialDuration": [
            "longRest"
          ],
          "transfer": false
        },
        "core": {
          "statusId": ""
        },
        "dnd5e-helpers": {
          "rest-effect": "Ignore"
        },
        "ActiveAuras": {
          "isAura": false,
          "aura": "None",
          "radius": null,
          "alignment": "",
          "type": "",
          "ignoreSelf": false,
          "height": false,
          "hidden": false,
          "displayTemp": false,
          "hostile": false,
          "onlyOnce": false
        }
      },
      "tint": null,
      "selectedKey": "macro.itemMacro.GM"
    }
  ],
  "flags": {
    "ddbimporter": {
      "id": 757,
      "data": {
        "id": 757,
        "name": "Hex Warrior",
        "prerequisite": null,
        "description": "<p class=\"Core-Styles_Core-Body\">At 1st level, you acquire the training necessary to effectively arm yourself for battle. You gain proficiency with medium armor, shields, and martial weapons.</p>\r\n<p class=\"Core-Styles_Core-Body\">The influence of your patron also allows you to mystically channel your will through a particular weapon. Whenever you finish a long rest, you can touch one weapon that you are proficient with and that lacks the two-handed property. When you attack with that weapon, you can use your Charisma modifier, instead of Strength or Dexterity, for the attack and damage rolls. This benefit lasts until you finish a long rest. If you later gain the Pact of the Blade feature, this benefit extends to every pact weapon you conjure with that feature, no matter the weapon’s type.</p>",
        "requiredLevel": 1,
        "displayOrder": 3
      },
      "version": "2.9.58",
      "featureId": 757,
      "featureName": "Hex Warrior",
      "requiredLevel": 1,
      "prerequisite": null,
      "class": "The Hexblade",
      "classId": 115,
      "subClass": "The Hexblade",
      "parentClassId": 7
    },
    "obsidian": {
      "source": {
        "type": "class",
        "text": "The Hexblade"
      }
    },
    "midi-qol": {
      "onUseMacroName": "",
      "effectActivation": false
    },
    "core": {
      "sourceId": "Compendium.world.ddb-class-features.u3wnJFgPjSI96WQI"
    },
    "midiProperties": {
      "nodam": false,
      "fulldam": false,
      "halfdam": false,
      "rollOther": false,
      "critOther": false,
      "magicdam": false,
      "magiceffect": false,
      "concentration": false,
      "toggleEffect": false
    },
    "rest-recovery": {
      "data": {
        "recovery": {
          "enabled": false
        }
      }
    },
    "itemacro": {
      "macro": {
        "data": {
          "_id": null,
          "name": "Hex Warrior",
          "type": "script",
          "author": "ckiTPzlaPztdkjV6",
          "img": "icons/svg/dice-target.svg",
          "scope": "global",
          "command": "const lastArg = args[args.length - 1];\nconst tokenOrActor = await fromUuid(lastArg.actorUuid);\nconst targetActor = tokenOrActor.actor ? tokenOrActor.actor : tokenOrActor;\nconst DAEItem = lastArg.efData.flags.dae.itemData;\n\nfunction valueLimit(val, min, max) {\n  return val < min ? min : val > max ? max : val;\n}\n\n/**\n * Select for weapon\n */\nif (args[0] === \"on\") {\n  const weapons = targetActor.items.filter((i) => i.data.type === \"weapon\" && i.data.data.properties.two !== true);\n  let weapon_content = \"\";\n\n  //Filter for weapons\n  weapons.forEach((weapon) => {\n    weapon_content += `<label class=\"radio-label\">\n  <input type=\"radio\" name=\"weapon\" value=\"${weapon.id}\">\n  <img src=\"${weapon.img}\" style=\"border:0px; width: 50px; height:50px;\">\n  ${weapon.data.name}\n</label>`;\n  });\n\n  let content = `\n    <style>\n    .hexWeapon .form-group {\n        display: flex;\n        flex-wrap: wrap;\n        width: 100%;\n        align-items: flex-start;\n      }\n\n      .hexWeapon .radio-label {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        text-align: center;\n        justify-items: center;\n        flex: 1 0 25%;\n        line-height: normal;\n      }\n\n      .hexWeapon .radio-label input {\n        display: none;\n      }\n\n      .hexWeapon img {\n        border: 0px;\n        width: 50px;\n        height: 50px;\n        flex: 0 0 50px;\n        cursor: pointer;\n      }\n\n      /* CHECKED STYLES */\n      .hexWeapon [type=radio]:checked + img {\n        outline: 2px solid #f00;\n      }\n    </style>\n    <form class=\"hexWeapon\">\n      <div class=\"form-group\" id=\"weapons\">\n          ${weapon_content}\n      </div>\n    </form>\n`;\n\n  new Dialog({\n    content,\n    buttons: {\n      ok: {\n        label: `Ok`,\n        callback: (html) => {\n          const itemId = $(\"input[type='radio'][name='weapon']:checked\").val();\n          const weaponItem = targetActor.items.get(itemId);\n          let copyItem = duplicate(weaponItem);\n          DAE.setFlag(targetActor, \"hexWeapon\", {\n            weapon: itemId,\n\t\t\tability: copyItem.data.ability,\n\t\t\tname: copyItem.name,\n          });\n          if (copyItem.data.attackBonus === \"\") copyItem.data.attackBonus = \"0\";\n          copyItem.data.ability = \"cha\";\n\t\t  copyItem.name = \"Hex \" + copyItem.name;\n          targetActor.updateEmbeddedDocuments(\"Item\", [copyItem]);\n        },\n      },\n      cancel: {\n        label: `Cancel`,\n      },\n    },\n  }).render(true);\n}\n\n//Revert weapon and unset flag.\nif (args[0] === \"off\") {\ntry {\n    const { weapon, ability, name } = DAE.getFlag(targetActor, \"hexWeapon\");\n    const weaponItem = targetActor.items.get(weapon);\n    let copyItem = duplicate(weaponItem);\n    copyItem.data.ability = ability;\n    copyItem.name = copyItem.name.replace(\"Hex \", \"\");\n    targetActor.updateEmbeddedDocuments(\"Item\", [copyItem]);\n    DAE.unsetFlag(targetActor, \"hexWeapon\");\n  } catch (err) {\n    console.error('hex warrior macro error');\n  }\n}",
          "folder": null,
          "sort": 0,
          "permission": {
            "default": 0
          },
          "flags": {}
        },
        "_id": null,
        "name": "Hex Warrior",
        "type": "script",
        "author": "ckiTPzlaPztdkjV6",
        "img": "icons/svg/dice-target.svg",
        "scope": "global",
        "command": "// hex warrior\n\nconst lastArg = args[args.length - 1];\nconst tokenOrActor = await fromUuid(lastArg.actorUuid);\nconst targetActor = tokenOrActor.actor ? tokenOrActor.actor : tokenOrActor;\nconst DAEItem = lastArg.efData.flags.dae.itemData;\n\nfunction valueLimit(val, min, max) {\n  return val < min ? min : val > max ? max : val;\n}\n\n/**\n * Select for weapon\n */\nif (args[0] === \"on\") {\n  const weapons = targetActor.items.filter((i) => i.data.type === \"weapon\" && i.data.data.properties.two !== true);\n  let weapon_content = \"\";\n\n  //Filter for weapons\n  weapons.forEach((weapon) => {\n    weapon_content += `<label class=\"radio-label\">\n  <input type=\"radio\" name=\"weapon\" value=\"${weapon.id}\">\n  <img src=\"${weapon.img}\" style=\"border:0px; width: 50px; height:50px;\">\n  ${weapon.data.name}\n</label>`;\n  });\n\n  let content = `\n    <style>\n    .hexWeapon .form-group {\n        display: flex;\n        flex-wrap: wrap;\n        width: 100%;\n        align-items: flex-start;\n      }\n\n      .hexWeapon .radio-label {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        text-align: center;\n        justify-items: center;\n        flex: 1 0 25%;\n        line-height: normal;\n      }\n\n      .hexWeapon .radio-label input {\n        display: none;\n      }\n\n      .hexWeapon img {\n        border: 0px;\n        width: 50px;\n        height: 50px;\n        flex: 0 0 50px;\n        cursor: pointer;\n      }\n\n      /* CHECKED STYLES */\n      .hexWeapon [type=radio]:checked + img {\n        outline: 2px solid #f00;\n      }\n    </style>\n    <form class=\"hexWeapon\">\n      <div class=\"form-group\" id=\"weapons\">\n          ${weapon_content}\n      </div>\n    </form>\n`;\n\n  new Dialog({\n    content,\n    buttons: {\n      ok: {\n        label: `Ok`,\n        callback: (html) => {\n          const itemId = $(\"input[type='radio'][name='weapon']:checked\").val();\n          const weaponItem = targetActor.items.get(itemId);\n          let copyItem = duplicate(weaponItem);\n          DAE.setFlag(targetActor, \"hexWeapon\", {\n            weapon: itemId,\n\t\t\tability: copyItem.data.ability,\n\t\t\tname: copyItem.name,\n          });\n          if (copyItem.data.attackBonus === \"\") copyItem.data.attackBonus = \"0\";\n          copyItem.data.ability = \"cha\";\n\t\t  copyItem.name = \"Hex \" + copyItem.name;\n          targetActor.updateEmbeddedDocuments(\"Item\", [copyItem]);\n        },\n      },\n      cancel: {\n        label: `Cancel`,\n      },\n    },\n  }).render(true);\n}\n\n//Revert weapon and unset flag.\nif (args[0] === \"off\") {\ntry {\n    const { weapon, ability, name } = DAE.getFlag(targetActor, \"hexWeapon\");\n    const weaponItem = targetActor.items.get(weapon);\n    let copyItem = duplicate(weaponItem);\n    copyItem.data.ability = ability;\n    copyItem.name = copyItem.name.replace(\"Hex \", \"\");\n    targetActor.updateEmbeddedDocuments(\"Item\", [copyItem]);\n    DAE.unsetFlag(targetActor, \"hexWeapon\");\n  } catch (err) {\n    console.error('hex warrior macro error');\n  }\n}",
        "folder": null,
        "sort": 0,
        "permission": {
          "default": 0
        },
        "flags": {}
      }
    },
    "scene-packer": {
      "sourceId": "Item.ctfaecqHBD51OsmT"
    },
    "exportSource": {
      "world": "dnd5e",
      "system": "dnd5e",
      "coreVersion": "9.280",
      "systemVersion": "1.6.3"
    }
  }
}